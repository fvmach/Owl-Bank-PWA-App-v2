"use strict";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var require_isObjectLike=__commonJS({"../../../../node_modules/lodash/isObjectLike.js"(exports,module2){function isObjectLike(value){return value!=null&&typeof value=="object"}module2.exports=isObjectLike}});var require_freeGlobal=__commonJS({"../../../../node_modules/lodash/_freeGlobal.js"(exports,module2){var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;module2.exports=freeGlobal}});var require_root=__commonJS({"../../../../node_modules/lodash/_root.js"(exports,module2){var freeGlobal=require_freeGlobal(),freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")();module2.exports=root}});var require_Symbol=__commonJS({"../../../../node_modules/lodash/_Symbol.js"(exports,module2){var root=require_root(),Symbol2=root.Symbol;module2.exports=Symbol2}});var require_getRawTag=__commonJS({"../../../../node_modules/lodash/_getRawTag.js"(exports,module2){var Symbol2=require_Symbol(),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol2?Symbol2.toStringTag:void 0;function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=void 0;var unmasked=!0}catch{}var result=nativeObjectToString.call(value);return unmasked&&(isOwn?value[symToStringTag]=tag:delete value[symToStringTag]),result}module2.exports=getRawTag}});var require_objectToString=__commonJS({"../../../../node_modules/lodash/_objectToString.js"(exports,module2){var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(value){return nativeObjectToString.call(value)}module2.exports=objectToString}});var require_baseGetTag=__commonJS({"../../../../node_modules/lodash/_baseGetTag.js"(exports,module2){var Symbol2=require_Symbol(),getRawTag=require_getRawTag(),objectToString=require_objectToString(),nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol2?Symbol2.toStringTag:void 0;function baseGetTag(value){return value==null?value===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}module2.exports=baseGetTag}});var require_overArg=__commonJS({"../../../../node_modules/lodash/_overArg.js"(exports,module2){function overArg(func,transform){return function(arg){return func(transform(arg))}}module2.exports=overArg}});var require_getPrototype=__commonJS({"../../../../node_modules/lodash/_getPrototype.js"(exports,module2){var overArg=require_overArg(),getPrototype=overArg(Object.getPrototypeOf,Object);module2.exports=getPrototype}});var require_isPlainObject=__commonJS({"../../../../node_modules/lodash/isPlainObject.js"(exports,module2){var baseGetTag=require_baseGetTag(),getPrototype=require_getPrototype(),isObjectLike=require_isObjectLike(),objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag)return!1;var proto=getPrototype(value);if(proto===null)return!0;var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}module2.exports=isPlainObject}});var require_isElement=__commonJS({"../../../../node_modules/lodash/isElement.js"(exports,module2){var isObjectLike=require_isObjectLike(),isPlainObject=require_isPlainObject();function isElement2(value){return isObjectLike(value)&&value.nodeType===1&&!isPlainObject(value)}module2.exports=isElement2}});var src_exports={};__export(src_exports,{DataGrid:()=>DataGrid,DataGridBody:()=>DataGridBody,DataGridCell:()=>DataGridCell,DataGridFoot:()=>DataGridFoot,DataGridHead:()=>DataGridHead,DataGridHeader:()=>DataGridHeader,DataGridHeaderSort:()=>DataGridHeaderSort,DataGridRow:()=>DataGridRow});module.exports=__toCommonJS(src_exports);var import_reakit_library=require("@twilio-paste/reakit-library"),import_table=require("@twilio-paste/table"),import_uid_library=require("@twilio-paste/uid-library"),React2=__toESM(require("react"));var React=__toESM(require("react")),DataGridContext=React.createContext({actionable:!1,striped:!1});function matches(element,selectors){return"matches"in element?element.matches(selectors):"msMatchesSelector"in element?element.msMatchesSelector(selectors):element.webkitMatchesSelector(selectors)}var selector="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])";function isFocusable(element){return matches(element,selector)}function getAllFocusableIn(container){return Array.from(container.querySelectorAll(selector)).filter(isFocusable)}function getFirstFocusableIn(container){let[first]=getAllFocusableIn(container);return first||null}function getDocument(element){return element?element.ownerDocument||element:document}function getActiveElement(element){let{activeElement}=getDocument(element);return activeElement?.nodeName?activeElement:null}function hasFocus(element){let activeElement=getActiveElement(element);if(!activeElement)return!1;if(activeElement===element)return!0;let activeDescendant=activeElement.getAttribute("aria-activedescendant");return activeDescendant?activeDescendant===element.id:!1}function ensureFocus(element,{preventScroll,isActive=hasFocus}={}){return isActive(element)||(element.focus({preventScroll}),isActive(element))?-1:requestAnimationFrame(()=>{element.focus({preventScroll})})}var updateTabIndexForActionable=(cellElement,actionable)=>{getAllFocusableIn(cellElement).forEach(element=>{element.tabIndex=actionable?0:-1})},delayedSetFocusable=element=>{setTimeout(()=>{element!=null&&(element.tabIndex=0)},150)},isCell=element=>element.tagName==="TD"||element.tagName==="TH",getClosestCellFrom=(element,dataGridId)=>element==null||!dataGridId?null:element.closest(`[id="${dataGridId}"] th, [id="${dataGridId}"] td`),getClosestGridCellFromCurrentFocus=dataGridId=>{let focusedElement=getActiveElement();return focusedElement?isCell(focusedElement)?focusedElement:getClosestCellFrom(focusedElement,dataGridId):null};var DataGrid=React2.forwardRef(({element="DATA_GRID",role="grid",striped=!1,...props},ref)=>{let dataGridId=`data-grid-${(0,import_uid_library.useUID)()}`,lastFocusedElement=React2.useRef(null),compositeState=(0,import_reakit_library.useCompositeState)({unstable_virtual:!1}),[actionable,setActionable]=React2.useState(!1),handleMouseDown=React2.useCallback(()=>{setActionable(!0)},[]),handleFocus=React2.useCallback(e=>{e.target!=null&&(lastFocusedElement.current=e.target)},[]),handleBlur=React2.useCallback(event=>{if(!event.currentTarget.contains(event.relatedTarget)&&(setActionable(!1),lastFocusedElement.current!=null)){let closestCell=getClosestCellFrom(lastFocusedElement.current,dataGridId);closestCell&&delayedSetFocusable(closestCell)}},[dataGridId]),handleKeypress=React2.useCallback(event=>{switch(event.key){case"Enter":{setActionable(!0);let activeElement=getActiveElement();if(activeElement&&isCell(activeElement)){let firstFocusableElement=getFirstFocusableIn(activeElement);firstFocusableElement&&(ensureFocus(firstFocusableElement),activeElement.tabIndex=actionable?0:-1)}break}case"Escape":{setActionable(!1);let closestCell=getClosestGridCellFromCurrentFocus(dataGridId);closestCell&&(ensureFocus(closestCell),delayedSetFocusable(closestCell));break}default:break}},[actionable,dataGridId]),dataGridState={...compositeState,actionable,striped};return React2.createElement(DataGridContext.Provider,{value:dataGridState},React2.createElement(import_reakit_library.Composite,{...props,...compositeState,id:dataGridId,ref,as:import_table.Table,element,role,onKeyDown:handleKeypress,onMouseDown:handleMouseDown,onFocus:handleFocus,onBlur:handleBlur,isActionable:actionable,"data-actionable":actionable}))});DataGrid.displayName="DataGrid";var import_table2=require("@twilio-paste/table"),React3=__toESM(require("react")),DataGridHead=React3.forwardRef(({element="DATA_GRID_HEAD",...props},ref)=>React3.createElement(import_table2.THead,{...props,element,ref}));DataGridHead.displayName="DataGridHead";var import_reakit_library2=require("@twilio-paste/reakit-library"),React5=__toESM(require("react"));var import_box=require("@twilio-paste/box"),import_styling_library=require("@twilio-paste/styling-library"),React4=__toESM(require("react")),StyledTr=import_styling_library.styled.tr((0,import_styling_library.css)({"&[aria-selected=true] > td":{borderColor:"colorBorderPrimaryWeaker"},"&[aria-selected=true] > th":{borderColor:"colorBorderPrimaryWeaker"}})),Tr=React4.forwardRef(({element="DATA_GRID_TR",striped,...props},ref)=>React4.createElement(import_box.Box,{...(0,import_box.safelySpreadBoxProps)(props),ref,element,as:StyledTr,"aria-selected":props.selected,_even:{backgroundColor:striped?"colorBackgroundRowStriped":"transparent"},_selected:{backgroundColor:"colorBackgroundPrimaryWeakest"}}));Tr.displayName="Tr";var DataGridRow=React5.forwardRef(({element="DATA_GRID_ROW",...props},ref)=>{let dataGridState=React5.useContext(DataGridContext);return React5.createElement(import_reakit_library2.CompositeGroup,{as:Tr,...props,element,...dataGridState,ref,role:"row"})});DataGridRow.displayName="DataGridRow";var React9=__toESM(require("react"));var import_reakit_library3=require("@twilio-paste/reakit-library"),import_utils2=require("@twilio-paste/utils"),import_isElement=__toESM(require_isElement()),React8=__toESM(require("react"));var import_box2=require("@twilio-paste/box"),React6=__toESM(require("react")),Td=React6.forwardRef(({textAlign="left",whiteSpace,element="DATA_GRID_TD",...props},ref)=>React6.createElement(import_box2.Box,{...(0,import_box2.safelySpreadBoxProps)(props),ref,as:"td",element,borderStyle:"solid",borderColor:"colorBorderWeaker",borderWidth:"borderWidth0",borderBottomWidth:"borderWidth10",fontSize:"fontSize30",lineHeight:"lineHeight30",padding:"space50",position:"relative",textAlign,whiteSpace,verticalAlign:"inherit",wordWrap:"break-word",color:"inherit",_first:{paddingLeft:"space50"},_last:{paddingRight:"space50"},_focus:{outline:"none",boxShadow:"shadowFocusInset"}}));Td.displayName="Td";var import_box3=require("@twilio-paste/box"),React7=__toESM(require("react")),Th=React7.forwardRef(({width,textAlign="left",whiteSpace,element="DATA_GRID_TH",...props},ref)=>React7.createElement(import_box3.Box,{...(0,import_box3.safelySpreadBoxProps)(props),ref,element,as:"th",borderBottomStyle:"solid",borderBottomColor:"colorBorderWeaker",borderBottomWidth:"borderWidth10",fontSize:"fontSize30",lineHeight:"lineHeight30",fontWeight:"fontWeightSemibold",paddingY:"space40",paddingX:"space50",width,position:"relative",textAlign,whiteSpace,verticalAlign:"inherit",color:"inherit",_first:{paddingLeft:"space50"},_last:{paddingRight:"space50"},_focus:{outline:"none",boxShadow:"shadowFocusInset"}}));Th.displayName="Th";var DataGridCell=({element="DATA_GRID_CELL",as="td",...props})=>{let dataGridState=React8.useContext(DataGridContext),cellRef=React8.useRef(),handleMouseDown=React8.useCallback(()=>{ensureFocus(cellRef.current)},[]),onListMutation=React8.useCallback(mutationList=>{mutationList.length!==0&&mutationList.forEach(mutation=>{if(!(0,import_isElement.default)(mutation.target))return;let target=mutation.target;mutation.attributeName==="tabindex"&&dataGridState.actionable&&target.tabIndex===0&&isCell(target)&&(target.tabIndex=-1)})},[dataGridState.actionable]);return(0,import_utils2.useMutationObservable)(cellRef.current,onListMutation),React8.useEffect(()=>{setTimeout(()=>{cellRef.current&&updateTabIndexForActionable(cellRef.current,dataGridState.actionable)},10)},[dataGridState.actionable]),React8.createElement(import_reakit_library3.CompositeItem,{...props,...dataGridState,element,ref:cellRef,as:as==="td"?Td:Th,onClick:handleMouseDown})};DataGridCell.displayName="DataGridCell";var DataGridHeader=({element="DATA_GRID_HEADER",...props})=>React9.createElement(DataGridCell,{element,...props,as:"th"});DataGridHeader.displayName="DataGridHeader";var import_button=require("@twilio-paste/button"),import_ArrowDownIcon=require("@twilio-paste/icons/cjs/ArrowDownIcon"),import_ArrowUpIcon=require("@twilio-paste/icons/cjs/ArrowUpIcon"),import_UnsortedIcon=require("@twilio-paste/icons/cjs/UnsortedIcon"),import_screen_reader_only=require("@twilio-paste/screen-reader-only"),React10=__toESM(require("react")),DataGridHeaderSortIcon=({direction,element})=>{switch(direction){case"ascending":return React10.createElement(import_ArrowUpIcon.ArrowUpIcon,{decorative:!0,element});case"descending":return React10.createElement(import_ArrowDownIcon.ArrowDownIcon,{decorative:!0,element});case"none":return React10.createElement(import_UnsortedIcon.UnsortedIcon,{decorative:!0,element});default:return null}};DataGridHeaderSortIcon.displayName="DataGridHeaderSortIcon";var DataGridHeaderSort=({direction,onClick,element="DATA_GRID_HEADER_SORT",i18nAscendingLabel="Sort ascending",i18nDescendingLabel="Sort descending",i18nUnsortedLabel="Unsorted",...props})=>{let i18nLabelDirectionMap={ascending:i18nAscendingLabel,descending:i18nDescendingLabel,none:i18nUnsortedLabel};return React10.createElement(import_button.Button,{element,variant:"reset",size:"reset",onClick,...props},React10.createElement(DataGridHeaderSortIcon,{element:`${element}_ICON`,direction}),React10.createElement(import_screen_reader_only.ScreenReaderOnly,null,i18nLabelDirectionMap[direction]))};DataGridHeaderSort.displayName="DataGridHeaderSort";var import_table3=require("@twilio-paste/table"),React11=__toESM(require("react")),DataGridBody=React11.forwardRef(({element="DATA_GRID_BODY",...props},ref)=>React11.createElement(import_table3.TBody,{...props,element,ref}));DataGridBody.displayName="DataGridBody";var import_table4=require("@twilio-paste/table"),React12=__toESM(require("react")),DataGridFoot=React12.forwardRef(({element="DATA_GRID_FOOT",...props},ref)=>React12.createElement(import_table4.TFoot,{...props,element,ref}));DataGridFoot.displayName="DataGridFoot";
