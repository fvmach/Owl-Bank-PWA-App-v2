"use strict";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0})},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod);var src_exports={};__export(src_exports,{Toast:()=>Toast,ToastContainer:()=>ToastContainer,Toaster:()=>Toaster,useToaster:()=>useToaster});module.exports=__toCommonJS(src_exports);var import_button=require("@twilio-paste/button"),import_CloseIcon=require("@twilio-paste/icons/cjs/CloseIcon"),import_ErrorIcon=require("@twilio-paste/icons/cjs/ErrorIcon"),import_NeutralIcon=require("@twilio-paste/icons/cjs/NeutralIcon"),import_SuccessIcon=require("@twilio-paste/icons/cjs/SuccessIcon"),import_WarningIcon=require("@twilio-paste/icons/cjs/WarningIcon"),import_media_object=require("@twilio-paste/media-object"),import_screen_reader_only=require("@twilio-paste/screen-reader-only"),React5=__toESM(require("react"));var import_box=require("@twilio-paste/box"),React=__toESM(require("react")),ErrorToast=React.forwardRef(({element="TOAST",variant,...props},ref)=>React.createElement(import_box.Box,{...(0,import_box.safelySpreadBoxProps)(props),ref,color:"colorTextError",width:["100%","size40","size40"],backgroundColor:"colorBackgroundErrorWeakest",borderColor:"colorBorderErrorWeak",borderRadius:"borderRadius30",borderStyle:"solid",borderWidth:"borderWidth10",boxShadow:"shadowHigh",element,padding:"space60",variant},props.children));ErrorToast.displayName="ErrorToast";var import_box2=require("@twilio-paste/box"),React2=__toESM(require("react")),NeutralToast=React2.forwardRef(({element="TOAST",variant,...props},ref)=>React2.createElement(import_box2.Box,{...(0,import_box2.safelySpreadBoxProps)(props),ref,color:"colorTextNeutral",width:["100%","size40","size40"],backgroundColor:"colorBackgroundNeutralWeakest",borderColor:"colorBorderNeutralWeak",borderRadius:"borderRadius30",borderStyle:"solid",borderWidth:"borderWidth10",boxShadow:"shadowHigh",element,padding:"space60",variant},props.children));NeutralToast.displayName="NeutralToast";var import_box3=require("@twilio-paste/box"),React3=__toESM(require("react")),SuccessToast=React3.forwardRef(({element="TOAST",variant,...props},ref)=>React3.createElement(import_box3.Box,{...(0,import_box3.safelySpreadBoxProps)(props),ref,color:"colorTextSuccess",width:["100%","size40","size40"],backgroundColor:"colorBackgroundSuccessWeakest",borderColor:"colorBorderSuccessWeak",borderRadius:"borderRadius30",borderStyle:"solid",borderWidth:"borderWidth10",boxShadow:"shadowHigh",element,padding:"space60",variant},props.children));SuccessToast.displayName="SuccessToast";var import_box4=require("@twilio-paste/box"),React4=__toESM(require("react")),WarningToast=React4.forwardRef(({element="TOAST",variant,...props},ref)=>React4.createElement(import_box4.Box,{...(0,import_box4.safelySpreadBoxProps)(props),ref,color:"colorTextWarningStrong",width:["100%","size40","size40"],backgroundColor:"colorBackgroundWarningWeakest",borderColor:"colorBorderWarningWeak",borderRadius:"borderRadius30",borderStyle:"solid",borderWidth:"borderWidth10",boxShadow:"shadowHigh",element,padding:"space60",variant},props.children));WarningToast.displayName="WarningToast";var ToastVariantObject={ERROR:"error",NEUTRAL:"neutral",SUCCESS:"success",WARNING:"warning"};var ToastComponentVariants={error:ErrorToast,neutral:NeutralToast,success:SuccessToast,warning:WarningToast},renderToastIcon=(variant,title,element)=>{switch(variant){case ToastVariantObject.ERROR:return React5.createElement(import_ErrorIcon.ErrorIcon,{color:"colorTextIconError",decorative:!1,title,element:`${element}_ICON`,size:"sizeIcon20"});case ToastVariantObject.SUCCESS:return React5.createElement(import_SuccessIcon.SuccessIcon,{color:"colorTextIconSuccess",decorative:!1,title,element:`${element}_ICON`,size:"sizeIcon20"});case ToastVariantObject.WARNING:return React5.createElement(import_WarningIcon.WarningIcon,{color:"colorTextIconWarning",decorative:!1,title,element:`${element}_ICON`,size:"sizeIcon20"});case ToastVariantObject.NEUTRAL:default:return React5.createElement(import_NeutralIcon.NeutralIcon,{color:"colorTextIconNeutral",decorative:!1,title,element:`${element}_ICON`,size:"sizeIcon20"})}},Toast=React5.forwardRef(({children,onDismiss,variant="neutral",element="TOAST",setFocus,i18nDismissLabel="Dismiss toast",i18nErrorLabel="(error)",i18nNeutralLabel="(information)",i18nSuccessLabel="(success)",i18nWarningLabel="(warning)",...props},ref)=>{let ToastComponent=ToastComponentVariants[variant],buttonRef=React5.useRef(null);React5.useEffect(()=>{setFocus&&buttonRef.current&&buttonRef.current.focus({preventScroll:!0})},[setFocus]);let i18nVariants={error:i18nErrorLabel,neutral:i18nNeutralLabel,success:i18nSuccessLabel,warning:i18nWarningLabel};return React5.createElement(ToastComponent,{role:"status",variant,element,ref,...props},React5.createElement(import_media_object.MediaObject,{as:"div"},React5.createElement(import_media_object.MediaFigure,{as:"div",spacing:"space60"},renderToastIcon(variant,i18nVariants[variant],element)),React5.createElement(import_media_object.MediaBody,{as:"div"},children),onDismiss&&typeof onDismiss=="function"&&React5.createElement(import_media_object.MediaFigure,{align:"end",spacing:"space40"},React5.createElement(import_button.Button,{onClick:onDismiss,variant:"secondary_icon",ref:buttonRef,size:"reset",element:`${element}_CLOSE_BUTTON`},React5.createElement(import_CloseIcon.CloseIcon,{decorative:!0,size:"sizeIcon20",element:`${element}_CLOSE_ICON`}),React5.createElement(import_screen_reader_only.ScreenReaderOnly,null,i18nDismissLabel)))))});Toast.displayName="Toast";var import_stack=require("@twilio-paste/stack"),React7=__toESM(require("react"));var import_box5=require("@twilio-paste/box"),import_reakit_library=require("@twilio-paste/reakit-library"),import_theme=require("@twilio-paste/theme"),React6=__toESM(require("react")),ToastPortal=React6.forwardRef(({children,left,...props},ref)=>React6.createElement(import_reakit_library.Portal,null,React6.createElement(import_theme.StyledBase,null,React6.createElement(import_box5.Box,{...(0,import_box5.safelySpreadBoxProps)(props),position:"fixed",right:"space40",top:"space90",left,zIndex:"zIndex90",ref},children))));ToastPortal.displayName="ToastPortal";var ToastContainer=React7.forwardRef(({children,...props},ref)=>React7.createElement(ToastPortal,{...props},React7.createElement(import_stack.Stack,{orientation:"vertical",spacing:"space40",ref},children)));ToastContainer.displayName="ToastContainer";var import_animation_library=require("@twilio-paste/animation-library"),import_box6=require("@twilio-paste/box"),import_theme2=require("@twilio-paste/theme"),React8=__toESM(require("react"));var AnimatedToast=(0,import_animation_library.animated)(import_box6.Box),Toaster=({toasts,pop,...props})=>{let prefersReducedMotion=(0,import_animation_library.useReducedMotion)(),[refMap]=React8.useState(()=>new WeakMap),[returnTarget,setReturnTarget]=React8.useState({trigger:null}),theme=(0,import_theme2.useTheme)(),transitions=(0,import_animation_library.useTransition)(toasts,{from:{marginBottom:"0rem",opacity:0,transform:"translateX(100%) scale(1)",height:prefersReducedMotion?"auto":0},enter:prefersReducedMotion?{marginBottom:theme.space.space40,opacity:1,transform:"translateX(0px) scale(1)"}:item=>async next=>{await next({marginBottom:theme.space.space40,opacity:1,transform:"translateX(0px) scale(1)",height:refMap.get(item).offsetHeight})},leave:{marginBottom:"0rem",opacity:0,transform:"translateX(0px) scale(0.8)",height:prefersReducedMotion?"auto":0},config:{mass:1,tension:150,friction:20}}),clearReturnTarget=React8.useCallback(()=>{setReturnTarget({trigger:null})},[returnTarget]);return React8.useEffect(()=>{returnTarget.trigger!=null&&toasts.length===0&&(returnTarget.trigger.focus(),clearReturnTarget())},[toasts]),React8.createElement(ToastPortal,{...props},transitions((styles,item,state,index)=>React8.createElement(AnimatedToast,{as:"div",key:state.key,style:styles},React8.createElement(Toast,{key:item.id,...item,onDismiss:()=>{item.onDismiss!=null&&item.onDismiss(),pop(item.id)},ref:ref=>{ref!=null&&refMap.set(item,ref)},setFocus:index===0,onFocus:e=>{e.relatedTarget&&!returnTarget.trigger&&setReturnTarget({trigger:e.relatedTarget})}},item.message))))};Toaster.displayName="Toaster";var import_uid_library=require("@twilio-paste/uid-library"),React9=__toESM(require("react")),useToaster=()=>{let isMounted=React9.useRef(null),[toasts,setToasts]=React9.useState([]);React9.useEffect(()=>(isMounted.current=!0,()=>{isMounted.current=!1,toasts.forEach(toast=>{toast.timeOutId&&window.clearTimeout(toast.timeOutId)})}),[]);let pop=id=>{!isMounted.current||setToasts(currentToasts=>currentToasts.filter(toast=>(toast.id===id&&(toast.timeOutId&&window.clearTimeout(toast.timeOutId),toast.onDismiss&&toast.onDismiss()),toast.id!==id)))};return{toasts,push:newToast=>{if(!isMounted.current)return;let generatedID=(0,import_uid_library.uid)(newToast),timeOutId;newToast.dismissAfter!=null&&Number.isInteger(newToast.dismissAfter)&&(timeOutId=window.setTimeout(pop,newToast.dismissAfter,newToast.id||generatedID)),setToasts(state=>{let existingToasts=state.map(toast=>{let tmpToast=toast;return tmpToast.setFocus=!1,tmpToast});return[{id:generatedID,timeOutId,setFocus:!0,...newToast},...existingToasts]})},pop}};
